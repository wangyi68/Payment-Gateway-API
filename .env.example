# ============================================================
# Payment Gateway API - Environment Configuration
# ============================================================
# Copy file này thành .env và điền các giá trị
# Tham khảo README.md để biết thêm chi tiết
# ============================================================

# ============================================================
# 1. TheSieuToc API Configuration
# Lấy API key tại: https://thesieutoc.net/api/apiv2
# ============================================================
THESIEUTOC_API_KEY=your_thesieutoc_api_key_here

# ============================================================
# 2. PayOS Configuration
# Lấy thông tin tại: https://my.payos.vn/channels
# Sau khi tạo kênh thanh toán, vào "Quản lý API" để lấy keys
# ============================================================
# Client ID - Định danh kênh thanh toán
PAYOS_CLIENT_ID=your_payos_client_id_here

# API Key - Khóa xác thực API
PAYOS_API_KEY=your_payos_api_key_here

# Checksum Key - Khóa xác thực chữ ký webhook (HMAC SHA256)
# Dùng để verify webhook callbacks từ PayOS
PAYOS_CHECKSUM_KEY=your_payos_checksum_key_here

# ============================================================
# 3. Server Configuration
# ============================================================
# Port chạy server (default: 3000)
PORT=3000

# Host bind (default: localhost, dùng 0.0.0.0 cho production)
HOST=localhost

# Environment: development | production | test
NODE_ENV=development

# ============================================================
# 4. Database Configuration (SQLite)
# ============================================================
# Đường dẫn file SQLite database
# Thư mục sẽ được tạo tự động nếu chưa tồn tại
DATABASE_PATH=./data/database.sqlite

# ============================================================
# 5. Ngrok Configuration (Optional)
# Dùng để tạo public URL cho webhook callbacks khi dev local
# ============================================================
# Auth Token - Lấy tại: https://dashboard.ngrok.com/get-started/your-authtoken
NGROK_AUTH_TOKEN=

# Static Domain (Optional) - Lấy tại: https://dashboard.ngrok.com/cloud-edge/domains
# Ví dụ: your-domain.ngrok-free.dev
# Nếu để trống, ngrok sẽ tạo domain ngẫu nhiên mỗi lần khởi động
NGROK_DOMAIN=

# ============================================================
# 6. Redis Configuration (Optional)
# Nếu không cấu hình, sẽ dùng In-Memory Queue
# Redis cung cấp persistence và hỗ trợ multi-instance
# ============================================================
# Redis Host (để trống nếu không dùng Redis)
REDIS_HOST=

# Redis Port (default: 6379)
REDIS_PORT=6379

# Redis Password (để trống nếu không có auth)
REDIS_PASSWORD=

# ============================================================
# 7. Scheduler Configuration
# Background jobs cho kiểm tra pending, retry, cleanup
# ============================================================
# Bật/tắt scheduled tasks (true | false)
SCHEDULER_ENABLED=true

# ============================================================
# 8. Data Cleanup Configuration
# Tự động dọn dẹp dữ liệu cũ để tiết kiệm dung lượng
# ============================================================
# Số ngày giữ transactions trong DB (default: 90 = 3 tháng)
CLEANUP_TRANSACTION_DAYS=90

# Số ngày giữ log files (default: 30 = 1 tháng)
# Lưu ý: cardsuccess.log KHÔNG bị xóa tự động
CLEANUP_LOG_DAYS=30

# Số ngày giữ blacklist entries (default: 180 = 6 tháng)
CLEANUP_BLACKLIST_DAYS=180

# ============================================================
# 9. Card Validation Configuration
# ============================================================
# Số giờ kiểm tra thẻ trùng lặp (default: 24)
# Thẻ có cùng serial trong khoảng thời gian này sẽ bị từ chối
DUPLICATE_CHECK_HOURS=24

# ============================================================
# 10. Logging Configuration
# ============================================================
# Log level: error | warn | info | debug
# Production nên dùng: info hoặc warn
# Development có thể dùng: debug
LOG_LEVEL=info

# ============================================================
# 11. Security Configuration (Optional - for future use)
# ============================================================
# API Key cho xác thực requests (nếu muốn bảo vệ API)
# API_SECRET_KEY=your_super_secret_key_here

# Rate Limit - Số request tối đa mỗi phút per IP
# RATE_LIMIT_MAX=100

# ============================================================
# 12. Callback URLs (Optional - override defaults)
# ============================================================
# URL nhận callback từ TheSieuToc (tự động dùng ngrok nếu có)
# THESIEUTOC_CALLBACK_URL=https://your-domain.com/api/card/callback

# URL nhận webhook từ PayOS
# PAYOS_WEBHOOK_URL=https://your-domain.com/api/payos/callback